=======
托管
=======

.. _hosting/change-solution:

更改托管解决方案
=======================

更改数据库托管类型的说明取决于当前使用的解决方案以及数据库需要迁移到的解决方案。

迁移本地数据库
===================================

到 Odoo 在线
--------------

.. important::
   - Odoo 在线*不*兼容**非标准应用**。
   - 数据库的当前版本必须是 :doc:`支持的版本 <supported_versions>`。

#. 创建一个 :ref:`数据库的副本 <on-premise/duplicate>`。
#. 在此副本中，卸载所有**非标准应用**。
#. 使用数据库管理器获取一个*带文件存储的转储*。
#. `提交支持工单 <https://www.odoo.com/help>`_，并包含以下内容：

   - 您的**订阅号**，
   - 您想要用于数据库的**URL**（例如 `company.odoo.com`），以及
   - **转储文件**作为附件或文件链接（60 MB 以上的文件需要提供链接）。

#. Odoo 确保数据库兼容后将其上线。如果在过程中出现技术问题，Odoo 可能会与您联系。

.. note::
   如果有时间限制，请尽快`提交支持工单 <https://www.odoo.com/help>`_以安排转移。

到 Odoo.sh
----------

按照 Odoo.sh *创建项目*文档中 :ref:`导入您的数据库部分 <odoo_sh_import_your_database>` 的说明进行操作。

迁移 Odoo 在线数据库
====================================

.. important::
   Odoo 在线的 :ref:`中间版本 <supported_versions>` 不受 Odoo.sh 或本地托管支持。因此，如果要迁移的数据库正在运行中间版本，则必须先升级到下一个 :ref:`主要版本 <supported_versions>`，如果需要，等待其发布。

   .. example::
      要迁移运行 Odoo 16.3 的在线数据库，首先需要将其升级到 Odoo 17.0。

   .. tip::
      单击 `Odoo 在线数据库管理器 <https://www.odoo.com/my/databases/>`_ 上数据库名称旁边的齿轮图标 (:guilabel:`⚙`) 以显示其版本号。

   .. warning::
      如果与迁移中的数据库关联的 Odoo 订阅仍然有效，请联系客户服务经理或`提交支持工单 <https://www.odoo.com/help>`_以完成订阅转移。

到本地
-------------

#. 登录 `Odoo 在线数据库管理器 <https://www.odoo.com/my/databases/>`_，并单击数据库名称旁边的齿轮图标 (:guilabel:`⚙`) 以 :guilabel:`下载` 备份。如果由于文件过大导致下载失败，请`联系 Odoo 支持 <https://www.odoo.com/help>`_。
#. 使用数据库管理器在您的本地服务器上从备份恢复数据库。

到 Odoo.sh
----------

#. 登录 `Odoo 在线数据库管理器 <https://www.odoo.com/my/databases/>`_，并单击数据库名称旁边的齿轮图标 (:guilabel:`⚙`) 以 :guilabel:`下载` 备份。如果由于文件过大导致下载失败，请`联系 Odoo 支持 <https://www.odoo.com/help>`_。
#. 按照 Odoo.sh *创建项目*文档中 :ref:`导入您的数据库部分 <odoo_sh_import_your_database>` 的说明进行操作。

迁移 Odoo.sh 数据库
================================

到 Odoo 在线
--------------

.. important::
   Odoo 在线*不*兼容**非标准应用**。

#. 在进行生产构建之前，先在暂存构建中卸载所有**非标准应用**。
#. `创建支持工单 <https://www.odoo.com/help>`_ 并包含以下内容：

   - 您的**订阅号**，
   - 您想要用于数据库的**URL**（例如 `company.odoo.com`），
   - 应该迁移的**分支**，
   - 您希望数据库托管的**区域**（美洲、欧洲或亚洲），
   - 将成为**管理员**的用户，以及
   - 您希望数据库**上线的时间**（以及时区）。

#. Odoo 确保数据库兼容后将其上线。如果在过程中出现技术问题，Odoo 可能会与您联系。

.. note::
   - 如果有时间限制，请尽快`提交支持工单 <https://www.odoo.com/help>`_以安排转移。
   - 选择**最接近大多数用户的区域**以减少延迟。
   - 未来的**管理员**必须有 Odoo.com 账户。
   - 您希望数据库上线的**日期和时间**有助于安排从 Odoo.sh 服务器到 Odoo 在线服务器的切换。
   - 在迁移期间，数据库将**无法访问**。

到本地
-------------

#. 下载您的 Odoo.sh 生产数据库的 :ref:`备份 <odoo_sh_branches_backups>`。
#. 使用数据库管理器在您的本地服务器上从备份恢复数据库。
