:show-content:

========
请假管理
========

Odoo 的 **请假管理** 应用程序是集中管理所有请假相关信息的枢纽。该应用程序管理请假申请、余额、分配、审批和报告。

用户可以 :doc:`申请请假 <../hr/time_off/request_time_off>`，并查看他们的请假申请和请假余额概览。管理者可以 :doc:`分配请假 <time_off/allocations>` 给个人、团队或整个公司，并 :ref:`批准请假申请 <time_off/manage-time-off>`。

可以生成详细的 :ref:`报告 <time_off/reporting>` 查看已使用的请假时长（以及请假的种类），还可以创建 :ref:`累积计划 <time_off/accrual-plans>`，并设置 :ref:`公共假期 <time_off/public-holidays>`。

.. note::
   请注意，只有具有特定访问权限的用户才能查看 **请假管理** 应用程序的所有内容。

   所有用户都可以访问 **请假管理** 应用程序中的 *我的请假* 和 *概览* 部分。其他部分则需要特定的访问权限。

   为了更好地理解访问权限如何影响 **请假管理** 应用程序，请参考 :doc:`员工/new_employee` 文档，特别是有关配置工作信息选项卡的部分。

配置
=============

为了分配请假给员工，并让员工能够申请和使用他们的请假，首先必须配置各种请假类型，然后分配给员工（如果需要分配）。

.. _time_off/time-off-types:

请假类型
--------------

要查看当前配置的请假类型，请导航到 :menuselection:`请假管理应用程序 --> 配置 --> 请假类型`。请假类型以列表视图显示。

**请假管理** 应用程序预配置了四种请假类型：:guilabel:`带薪假期`、:guilabel:`病假`、:guilabel:`无薪假` 和 :guilabel:`补休`。这些类型可以根据业务需求进行修改，也可以按原样使用。

创建请假类型
~~~~~~~~~~~~~~~~~~~~

要创建新的请假类型，请导航到 :menuselection:`请假管理应用程序 --> 配置 --> 请假类型`。然后，点击 :guilabel:`新建` 按钮，显示一个空白的请假类型表单。

在表单顶部的空白行中输入特定请假类型的名称，例如 `病假` 或 `假期`。然后，在表单上输入以下信息。

.. note::
   请假类型表单上唯一**必填**的字段是 :guilabel:`请假类型` 的名称、:guilabel:`请假时间单位` 和 :guilabel:`请假类型`。此外，:guilabel:`请假申请` 和 :guilabel:`分配请求` 部分**必须**配置。

请假申请部分
*************************

- :guilabel:`审批`: 选择此请假类型需要的特定审批类型。选项如下：

  - :guilabel:`无需验证`: 申请此类请假不需要审批。请假申请会自动批准。
  - :guilabel:`由请假主管审批`: 只有在此表单上的 :guilabel:`通知请假主管` 字段中指定的 :ref:`请假主管 <time_off/time-off-officer>` 需要批准请假申请。默认情况下，选择此选项。
  - :guilabel:`由员工审批人审批`: 只有员工在 :ref:`员工表单 <employees/work-info-tab>` 的 *工作信息* 选项卡上指定的请假审批人需要批准请假申请。
  - :guilabel:`由员工审批人和请假主管审批`: 员工的 :ref:`指定请假审批人 <employees/work-info-tab>` 和 :ref:`请假主管 <time_off/time-off-officer>` 都需要批准请假申请。

分配请求部分
***************************

- :guilabel:`需要分配`: 如果此请假必须分配给员工，则选择 :guilabel:`是`。如果不需要提前分配时间即可申请此类请假，则选择 :guilabel:`无限制`。如果选择了 :guilabel:`无限制`，则表单中不会显示以下选项。
- :guilabel:`员工请求`: 如果允许员工申请超过分配的请假天数，则选择 :guilabel:`允许申请额外天数`。

  如果不允许员工申请超出分配的请假天数，则选择 :guilabel:`不允许`。

  .. example::
     为员工分配了10天的此类请假，并启用了 :guilabel:`允许申请额外天数` 选项。员工想申请12天的假期。由于启用了 :guilabel:`允许申请额外天数` 选项，因此他们可以提交申请额外的两天。

  .. important::
     请注意，申请额外的假期并**不**保证假期一定会被批准。

- :guilabel:`审批`: 选择此请假类型分配所需的审批类型。

  - :guilabel:`由请假主管批准` 表示此表单上设置的 :ref:`请假主管 <time_off/time-off-officer>` 必须批准分配。
  - :guilabel:`无需验证` 表示不需要任何审批。

配置部分
*********************

  .. _`time_off/time-off-officer`:

- :guilabel:`通知请假主管`: 选择此请假类型的请求和分配的审批人。
- :guilabel:`请假时间单位`: 从下拉菜单中选择申请请假的单位。

  选项如下：

  - :guilabel:`天`: 请假只能以整天为单位申请（8小时）。
  - :guilabel:`半天`: 请假只能以半天为单位申请（4小时）。
  - :guilabel:`小时`: 请假可以按小时申请。

  .. _`time_off/deduct-extra-hours`:

- :guilabel:`扣除额外时间`: 如果请假申请应考虑员工的额外工作时间，请启用此选项。

  .. example::
     如果员工一周多工作了两小时，并申请五小时的请假，那么请假申请将为三小时，因为先扣除了两小时的额外工作时间。

- :guilabel:`允许附加支持文件`: 启用此选项以允许员工在请假申请中附加文件。在需要文档的情况下（如长期病假）这很有用。
- :guilabel:`请假类型`: 从下拉菜单中选择请假类型，选项为 :guilabel:`工作时间` 或 :guilabel:`缺勤`。:guilabel:`工作时间` 表示请假期间计入员工的累计工时，而 :guilabel:`缺勤` 则不计入任何累计。
- :guilabel:`公司`: 如果数据库中创建了多个公司，并且此请假类型仅适用于某个公司，则从下拉菜单中选择公司。如果此字段留空，则该请假类型适用于数据库中的所有公司。此字段**仅**在多公司数据库中显示。

负余额部分
********************

如果员工能够申请超过他们当前拥有的请假时长，允许产生负余额，请启用 :guilabel:`允许负余额` 选项。如果启用，将出现一个 :guilabel:`负余额金额` 字段。在此字段中输入允许的最大负余额天数。

.. example::
   Sara 目前有三天的 `假期`。她计划休假五天。

   `假期` 请假类型启用了 :guilabel:`允许负余额` 选项，并将 :guilabel:`负余额金额` 设置为五天。

   这些设置允许 Sara 提交五天的 `假期` 申请。如果批准，她的 `假期` 余额将为负两天 (-2)。

.. image:: time_off/time-off-type-form-top.png
   :align: center
   :alt: 请假类型表单的上半部分，填写了病假的所有信息。

工资单部分
***************

如果请假类型应在 **工资单** 应用程序中创建 :doc:`../hr/payroll/work_entries`，请从下拉列表中选择 :guilabel:`工作条目类型`。

工时报表部分
******************

.. note::
   只有在开发者模式下，才会显示 :guilabel:`工时报表` 部分。有关如何访问开发者模式的详细信息，请参阅 :ref:`developer-mode` 文档。

当员工请假且同时使用工时报表时，Odoo 会在 **工时报表** 应用程序中为请假创建条目。本节定义这些条目的创建方式。

- :guilabel:`项目`: 选择该请假类型条目将显示在哪个项目中。
- :guilabel:`任务`: 选择该请假类型在工时报表中显示的任务。默认选项包括：:guilabel:`请假`、:guilabel:`会议` 或 :guilabel:`培训`。

显示选项部分
**********************

- :guilabel:`颜色`: 选择在 **请假管理** 应用程序仪表板中使用的颜色。
- :guilabel:`封面图片`: 选择在 **请假管理** 应用程序仪表板中使用的图标。

.. image:: time_off/time-off-type-form-bottom.png
   :align: center
   :alt: 请假类型表单的下半部分，填写了病假的所有信息。

.. _time_off/accrual-plans:

累积计划
-------------

有些请假是通过累积计划获得的，这意味着员工每工作一段特定的时间（小时、天、周等），就可以获得或“累积”一定的请假时长。

.. example::
   如果员工每周工作累积一天假期，他们每工作一小时就能获得0.2天假期。到40小时工作周结束时，他们将获得一整天（8小时）的假期。

创建累积计划
~~~~~~~~~~~~~~~~~~~

要创建新的累积计划，请导航到 :menuselection:`请假管理应用程序 --> 配置 --> 累积计划`。然后点击 :guilabel:`新建` 按钮，显示一个空白的累积计划表单。

在表单中输入以下信息：

- :guilabel:`名称`: 输入累积计划名称。
- :guilabel:`累积增益时间`: 选择员工开始累积请假的时间，选项为 :guilabel:`累积周期开始时` 或 :guilabel:`累积周期结束时`。
- :guilabel:`结转时间`: 选择员工获得之前累积的时间的时间点。选项为：

  - :guilabel:`年初`: 选择此选项时，累积将在下一年1月1日结转。
  - :guilabel:`分配日期`: 选择此选项时，累积会在时间分配给员工后立即结转。
  - :guilabel:`其他`: 如果前两种选项均不适用，请选择此选项。选择此选项时，将出现一个 :guilabel:`结转日期` 字段。使用两个下拉菜单选择日期，一个选择日，一个选择月。

- :guilabel:`基于工时累积`: 如果请假累积是根据员工的工作时间来决定的，请启用此选项。未被视为工时的天数将**不**计入 Odoo 中的累积计划。

  .. example::
     公司为员工设置了一个累积计划，规定每工作五天累积一天假期。该累积计划基于员工的工时（勾选了 :guilabel:`基于工时累积` 选项）。

     该员工每周工作标准40小时。根据累积计划，他们每月应获得四天假期。

     员工请了五天假。员工请假的 :ref:`请假类型 <time_off/time-off-types>` 被配置为 :guilabel:`缺勤`。

     由于累积计划仅基于工时来授予请假，该员工不会为五天的缺勤获得一天假期。

     到月底，该员工仅累积了三天假期，而不是四天。

- :guilabel:`里程碑转换`: 该字段**仅**在累积计划上配置了至少两个 :ref:`规则 <time_off/rules>` 后可见。此选项决定员工何时达到新的里程碑。如果他们在支付周期中间符合更换里程碑的条件，请决定员工是在 :guilabel:`立即` 更换里程碑，还是在 :guilabel:`本累积周期结束后` 更换（当前支付周期结束后）。
- :guilabel:`公司`: 此字段**仅**在多公司数据库中显示。使用下拉菜单选择累积计划适用的公司。如果留空，累积计划可以适用于所有公司。

.. image:: time_off/accrual-plan-form.png
   :align: center
   :alt: 所有条目都已填写的累积计划表单。

.. _time_off/rules:

规则
*****

必须创建规则，员工才能根据累积计划累积请假。

要创建新规则，请点击灰色 :guilabel:`规则` 部分中的 :guilabel:`新里程碑` 按钮，将会弹出一个 :guilabel:`创建里程碑` 模态表单。

在表单上填写以下字段：

- :guilabel:`员工累积`: 在此部分选择获得请假的参数。

  首先，使用下拉菜单选择累积的时间单位，选项为 :guilabel:`天` 或 :guilabel:`小时`。

  接下来，输入所选参数的数值。数值格式为 `X.XXXX`，因此可以配置部分天数或小时。

  最后，使用下拉菜单选择时间累积的频率。默认选项为 :guilabel:`按小时`、:guilabel:`按天`、:guilabel:`按周`、:guilabel:`每月两次`、:guilabel:`每月`、:guilabel:`每半年` 和 :guilabel:`每年`。

  根据所选选项，可能会出现额外字段。例如，如果选择了 :guilabel:`每月两次`，则会出现两个额外字段，以指定每月的两天。

- :guilabel:`累积上限`: 如果此计划有员工可以累积的最大天数，请启用此选项。

  启用后，在其下方会出现两个额外字段。使用下拉菜单选择时间段类型，选项为 :guilabel:`天` 或 :guilabel:`小时`。

  然后，在字段中输入数值，以指定可以累积的最大时间。

- :guilabel:`达到里程碑`: 输入员工开始累积请假之前必须经过的时间段数值。第一个值为数值；在第一个字段中输入一个数字。

  然后，在第二个字段中使用下拉菜单选择时间段类型。选项包括：:guilabel:`天`、:guilabel:`月` 或 :guilabel:`年`。

- :guilabel:`结转`: 选择如何处理未使用的请假时间。选项为：

  - :guilabel:`无。累积时间重置为0`: 未使用的请假时间将被清零。
  - :guilabel:`所有累积时间结转`: 所有未使用的请假时间将结转至下一年。
  - :guilabel:`有上限的结转`: 未使用的请假时间将结转至下一年，但有上限。如果选择此选项，将出现一个 :guilabel:`最多` 字段。在此字段中输入可以结转至下一年的 :guilabel:`天数` 上限。超出此参数的时间将作废。

.. important::
   如果将 :guilabel:`结转` 字段设置为 :guilabel:`无。累积时间重置为0`，该规则将*覆盖*累积计划上设置的 :guilabel:`结转时间`。

   如果公司创建了一个累积计划，允许员工在 :guilabel:`累积周期开始时`（即年初）获得假期，并在 *累积计划* 上将 :guilabel:`结转时间` 设置为 :guilabel:`年初`，这允许未使用的假期结转至下一年。

   然后，公司在累积计划上添加规则，分配每年五天假期，每年一月一日分配一周的假期。

   如果在 :guilabel:`创建里程碑` 弹出框中将 :guilabel:`结转` 字段设置为 :guilabel:`无。累积时间重置为0`，那么即使在 *累积计划* 表单上将 :guilabel:`结转时间` 设置为 :guilabel:`年初`，未使用的假期也不会结转。

   设置在*规则*上的结转优先于设置在*累积计划表单*上的结转。

填写完表单后，单击 :guilabel:`保存并关闭` 保存 :guilabel:`创建里程碑` 表单并关闭模态框，或单击 :guilabel:`保存并新建` 以保存表单并创建另一个里程碑。根据需要添加多个里程碑。

.. image:: time_off/milestone.png
   :align: center
   :alt: 所有条目都已填写的里程碑表单。

.. _time_off/public-holidays:

公共假期
---------------

要观测公共或国家假期，并为员工提供额外的假期，您可以在 Odoo 中配置观测到的*公共假期*。

在 Odoo 中配置这些假期很重要，这样员工可以知道他们的假期，不会在已经设置为公共假期（非工作日）的日子申请请假。

此外，所有在 **请假管理** 应用程序中配置的公共假期也会反映在使用工作计划的任何应用程序中，如 **日历**、**规划**、**制造** 等。

由于 Odoo 与其他使用工作计划的应用程序集成，最佳实践是确保配置*所有*公共假期。

创建公共假期
~~~~~~~~~~~~~~~~~~~~~

要创建公共假期，请导航到 :menuselection:`请假管理应用程序 --> 配置 --> 公共假期`。

所有当前配置的公共假期将以列表视图显示。

点击 :guilabel:`新建` 按钮，在列表底部出现一行新数据。

在该新行中输入以下信息：

- :guilabel:`名称`: 输入假期名称。
- :guilabel:`公司`: 如果在多公司数据库中，当前公司会默认填充此字段。此字段**不可**编辑。

  .. note::
     :guilabel:`公司` 字段默认隐藏。要查看此字段，请点击列表右上角列标题右侧的 :icon:`oi-settings-adjust` :guilabel:`（更多选项）` 图标，并从出现的下拉菜单中启用 :guilabel:`公司` 选项。

- :guilabel:`开始日期`: 使用日期和时间选择器，选择假期的开始日期和时间，然后点击 :icon:`fa-check` :guilabel:`应用`。默认情况下，此字段设置为当前日期。开始时间根据公司的开始时间设置（根据 :ref:`工作时间 <payroll/working-times>`）。如果用户的计算机设置了不同的时区，则开始时间会根据公司的时区进行调整。
- :guilabel:`结束日期`: 使用日期和时间选择器，选择假期的结束日期和时间，然后点击 :icon:`fa-check` :guilabel:`应用`。默认情况下，此字段设置为当前日期，结束时间根据公司的结束时间设置（根据 :ref:`工作时间 <payroll/working-times>`）。如果用户的计算机设置了不同的时区，则结束时间会根据公司的时区进行调整。

  .. example::
     位于旧金山的公司工作时间为上午9:00至下午6:00，工作日为8小时，午餐时间为1小时。

     对于在纽约的用户，其计算机时区设置为东部标准时间，创建的公共假期显示的开始时间为中午12:00至晚上9:00，考虑到3小时的时区差异。

     类似地，位于洛杉矶的用户，其计算机时区设置为太平洋标准时间，看到的公共假期时间为上午9:00至下午6:00。

- :guilabel:`工作时间`: 如果假期仅适用于具有特定工作时间的员工，请从下拉菜单中选择工作时间。如果留空，则假期适用于所有员工。
- :guilabel:`工作条目类型`: 如果使用 **工资单** 应用程序，此字段定义假期的 :ref:`工作条目 <payroll/work-entries>` 显示方式。从下拉菜单中选择工作条目类型。

.. image:: time_off/holidays.png
   :align: center
   :alt: 配置菜单中的公共假期列表。

强制工作日
--------------

一些公司有特定的日子，要求特定部门或全体员工必须在岗，在这些特定日子不允许请假。

这些类型的日子在 Odoo 中称为*强制工作日*。这些可以配置为公司范围的或特定部门的。当配置好后，指定部门或公司的员工将无法在这些强制工作日提交请假申请。

创建强制工作日
~~~~~~~~~~~~~~~~~~~~~

Odoo 中默认未配置任何强制工作日。要创建强制工作日，请导航到 :menuselection:`请假管理应用程序 --> 配置 --> 强制工作日`。

点击左上角的 :guilabel:`新建` 按钮，列表中会出现一行空白数据。

在该新行中输入以下信息：

- :guilabel:`名称`: 输入强制工作日的名称。
- :guilabel:`公司`: 如果在多公司数据库中，此字段可见，且默认填充当前公司。使用下拉菜单选择强制工作日所属的公司。
- :guilabel:`部门`: 此列默认隐藏。首先点击右上角的 :icon:`oi-settings-adjust` :guilabel:`（更多选项）` 图标，接着勾选 :guilabel:`部门` 复选框以显示此列。

  接下来，从下拉菜单中选择所需的部门。可以选择多个部门，且添加部门的数量没有限制。

  如果此字段留空，则强制工作日适用于整个公司。
- :guilabel:`开始日期`: 使用日历选择器选择强制工作日的开始日期。
- :guilabel:`结束日期`: 使用日历选择器选择强制工作日的结束日期。如果创建单个强制工作日，则结束日期应与开始日期相同。
- :guilabel:`颜色`: 如果需要，从提供的选项中选择一种颜色。如果不需要颜色，则选择 `无颜色` 选项，该选项由一个红线斜穿的白框表示。所选颜色将显示在 **请假管理** 应用程序仪表板中，无论是在日历中还是在图例中。

.. image:: time_off/mandatory.png
   :align: center
   :alt: 强制工作日部分，配置了三个工作日。

概览
========

要查看用户和/或他们管理的团队的请假颜色编码日程，请导航到 :menuselection:`请假管理应用程序 --> 概览`。此页面显示的默认日历过滤器为 `我的团队`，以月视图显示。

要更改显示的时间段，请点击 :guilabel:`月` 按钮，显示下拉菜单。然后，选择 :guilabel:`日`、:guilabel:`周` 或 :guilabel:`年`，以相应的视图显示日历。

要按所选时间段（:guilabel:`月`、:guilabel:`周` 等）前后导航，请点击 :guilabel:`←（左箭头）` 或 :guilabel:`→（右箭头）` 以相应时间段向前或向后移动。

例如，如果选择了 :guilabel:`月`，则箭头按月份调整视图。

随时单击 :guilabel:`今天` 按钮，即可返回包含当前日期的视图。

团队成员按字母顺序列在单独的行上，他们的请假申请，无论状态如何（*已验证* 或 *待审批*），都会显示在日历上。

每位员工都有颜色编码。员工的颜色是随机选择的，并且*不会*与他们请求的请假类型对应。

请假申请的状态通过请求的颜色细节表示，已验证的请求显示为实心颜色，待审批的请求显示为条纹。

请求的天数或小时数会显示在请求上（如果有足够的空间）。

在日历底部的 :guilabel:`总计` 行中，柱状图显示了任何给定日期预计将缺席的人数。每个柱子上的数字表示那些高亮显示日期的缺席员工人数。

点击请假条目以查看特定请假条目的详细信息。请求的总小时数或天数以及请假的开始和结束时间都会显示。要在模态框中查看请假申请的详细信息，请点击 :guilabel:`查看` 按钮。

.. image:: time_off/overview.png
   :align: center
   :alt: 用户团队的概览，显示了请假申请。

.. _time_off/reporting:

报告
=========

报告功能允许用户按员工或请假类型查看其团队的请假情况。这使得用户可以看到哪些员工正在请假，休了多少假以及使用了哪些请假类型。

在 :icon:`fa-area-chart` :guilabel:`（图形）` 或 :icon:`oi-view-pivot` :guilabel:`（数据透视表）` 视图中，可以通过报告左上角的 *插入到电子表格* 按钮将报告添加到电子表格中。

.. note::
   如果安装了 **文档** 应用程序，则会出现将报告添加到电子表格的选项。如果未安装，则可以将报告添加到 *仪表板*。

按员工
-----------

要查看员工请假申请的报告，请导航到 :menuselection:`请假管理应用程序 --> 报告 --> 按员工`。

默认报告以列表视图显示当年的数据，按字母顺序排列所有员工。每位员工的行默认折叠。要展开某一行，请单击该行任意位置。

视图会展开，并按请假类型组织请假申请。点击某一请假类型行的任意位置以展开，查看该类型下的所有单个请假申请。

列表中显示的信息包括：:guilabel:`员工` 名字、申请的 :guilabel:`天数`、:guilabel:`开始日期`、:guilabel:`结束日期`、:guilabel:`状态` 和 :guilabel:`描述`。

.. image:: time_off/employee-report.png
   :align: center
   :alt: 按员工显示的请假报告，以列表视图显示。

报告还可以通过其他方式显示。单击页面右上角的相应按钮选项，以该特定方式查看数据。各种选项包括 :icon:`oi-view-list` :guilabel:`（列表）` 或默认视图、:icon:`fa-area-chart` :guilabel:`（图形）`、:icon:`oi-view-pivot` :guilabel:`（数据透视表）` 或 :icon:`fa-calendar` :guilabel:`（日历）` 视图。

做出选择后，将出现该特定选择的其他选项。有关报告及其各种选项的详细信息，请参考 :doc:`reporting <../essentials/reporting>` 文档。

按类型
-------

要按请假类型查看所有请假的列表，请导航到 :menuselection:`请假管理应用程序 --> 报告 --> 按类型`。这将默认显示所有请假申请的柱状图。

将鼠标悬停在柱状图上，可以查看该特定请假类型的 :guilabel:`时长（天）`。

.. image:: time_off/bar-chart.png
   :align: center
   :alt: 各种请假类型，以及所请求的天数，以柱状图显示。详细信息以红框高亮显示。

点击某个柱状图，可以转到该请假类型的所有请假申请的详细列表视图。

每个请求都会列出，并显示以下信息：:guilabel:`员工`、:guilabel:`天数`、:guilabel:`请求类型`、:guilabel:`开始日期`、:guilabel:`结束日期`、:guilabel:`状态` 和 :guilabel:`描述`。

报告还可以通过其他方式显示。单击页面右上角的相应按钮选项，以这种方式查看数据。各种选项包括 :icon:`fa-area-chart` :guilabel:`（图形）`（默认视图）、:icon:`oi-view-list` :guilabel:`（列表）` 或 :icon:`oi-view-pivot` :guilabel:`（数据透视表）`。

做出选择后，将出现该特定选择的其他选项。有关报告及其各种选项的详细信息，请参考 :doc:`reporting <../essentials/reporting>` 文档。

.. seealso::
   - :doc:`time_off/allocations`
   - :doc:`time_off/request_time_off`
   - :doc:`time_off/my_time`
   - :doc:`time_off/management`

.. toctree::
   :titlesonly:

   time_off/allocations
   time_off/request_time_off
   time_off/my_time
   time_off/management
