==================================
管理产品变体的物料清单 (BoMs)
==================================

Odoo 允许一个物料清单 (BoM) 用于相同产品的多个变体。对于具有变体的产品，使用一个合并的物料清单 (BoM) 可以节省时间，避免管理多个物料清单 (BoMs) 的麻烦。

激活产品变体功能
=================

要激活产品变体功能，进入 :menuselection:`库存应用 --> 配置 --> 设置`，向下滚动到 :guilabel:`产品` 部分。然后，勾选 :guilabel:`变体` 选项。之后，点击 :guilabel:`保存` 以应用设置。

有关配置产品变体的更多信息，请参阅 :doc:`产品变体 <../../../sales/sales/products_prices/products/variants>` 文档。

.. image:: product_variants/product-variants-variants-settings.png
   :align: center
   :alt: 从库存应用设置中选择“变体”。

创建自定义产品属性
=================

激活产品变体功能后，可以在 :guilabel:`属性` 页面上创建和编辑产品属性。

可以从 :menuselection:`库存应用 --> 配置 --> 设置` 中点击 :guilabel:`属性` 按钮，或通过点击 :menuselection:`库存应用 --> 配置 --> 属性` 访问 :guilabel:`属性` 页面。

在 :guilabel:`属性` 页面上，您可以点击现有属性，或者点击 :guilabel:`创建` 来创建一个新属性。点击 :guilabel:`创建` 会显示一个新的空白表单，用于自定义属性。如果要编辑现有属性，请在其表单上点击 :guilabel:`编辑`。

为属性分配一个 :guilabel:`属性名称`，并从 :guilabel:`类别` 字段的下拉菜单中选择一个类别。接着，选择 :guilabel:`显示类型` 和 :guilabel:`变体创建模式` 字段旁的所需选项。选择完毕后，点击 :guilabel:`属性值` 标签下的 :guilabel:`添加行` 以添加新值。

.. tip::
   在 :guilabel:`值` 行中包含一个 :guilabel:`自定义值` 复选框。如果选中该项，则该值将被视为自定义值，允许客户在订购产品变体时输入特殊的定制请求。

.. example::
   .. image:: product_variants/product-variants-attribute.png
      :align: center
      :alt: 产品变体属性配置界面。

添加完所有所需的 :guilabel:`值` 后，点击 :guilabel:`保存` 以保存新属性。

在产品表单上添加产品变体
===========================

创建的属性可以应用于特定产品的特定变体。要将产品变体添加到产品，进入产品表单，路径为 :menuselection:`库存应用 --> 产品 --> 产品`。要更改产品，请点击 :guilabel:`编辑`。接着，点击 :guilabel:`变体` 标签。

在 :guilabel:`属性` 标题下，点击 :guilabel:`添加行` 来添加新属性，并从下拉菜单中选择要添加的属性。

然后，在 :guilabel:`值` 标题下，点击下拉菜单，从现有值列表中选择。点击每个所需值以添加它们，重复此过程以添加任何其他应添加到产品的属性。

完成后，点击 :guilabel:`保存` 以保存更改。

.. image:: product_variants/product-variants-product-form.png
   :align: center
   :alt: 带有值和属性的产品表单变体标签。

.. tip::
   对于具有多个变体且在内部生产的物料清单 (BoM) 产品，应该设置一个 **0,0 的补货规则**，或将其补货路线设置为 *按订单补货 (MTO)*。

为产品变体应用物料清单组件
===============================

接下来，创建一个新的物料清单 (BoM)，或者通过进入 :menuselection:`制造应用 --> 产品 --> 物料清单` 并点击 :guilabel:`创建`，从头开始配置。

通过点击 :guilabel:`产品` 字段中的下拉菜单选择所需产品，向物料清单 (BoM) 中添加产品。

然后，通过点击 :guilabel:`组件` 标签下的 :guilabel:`添加行`，并从下拉菜单中选择所需组件来添加组件。

在 :guilabel:`数量` 和 :guilabel:`产品计量单位` 列中选择所需的值。然后，在 :guilabel:`应用于变体` 列中选择所需的值。

.. note::
   一旦从 :menuselection:`库存` 应用程序中激活了 :guilabel:`变体` 设置，物料清单 (BoM) 中的 :guilabel:`应用于变体` 选项便可用于将组件分配给特定的产品变体。如果 :guilabel:`应用于变体` 字段未立即显示，可通过点击标题行右侧的额外选项菜单（三点图标）来激活它。

.. image:: product_variants/product-variants-apply-on-variants.png
   :align: center
   :alt: “应用于变体”选项在额外选项菜单中。

每个组件都可以分配给多个变体。未指定变体的组件将在产品的每个变体中使用。同样的原则适用于配置操作和副产品。

当通过组件分配定义变体物料清单 (BoM) 时，物料清单 (BoM) 主部分中的 :guilabel:`产品变体` 字段应为空。此字段 *仅* 用于专门为一个产品变体创建物料清单 (BoM) 时。

当所有所需配置完成后，点击表单顶部的 :guilabel:`保存` 以保存更改。

.. tip::
   对于仅适用于特定变体的组件，选择这些组件应在哪些操作中被消耗。如果 :guilabel:`在操作中消耗` 列 *没有* 立即显示，可以通过标题行右侧的额外选项菜单（三点图标）将其激活。

销售和生产变体的物料清单产品
===============================

要按订单销售和生产变体的物料清单 (BoM) 产品，进入 :menuselection:`销售应用 --> 创建` 来创建新的报价单。

销售物料清单产品的变体
------------------------

在空白的 :guilabel:`报价单` 表单上，点击 :guilabel:`客户` 字段旁的下拉菜单以添加客户。

接着，在 :guilabel:`订单行` 标签下，点击 :guilabel:`添加产品`，并从下拉菜单中选择之前创建的具有变体的物料清单 (BoM) 产品。此时会弹出一个 :guilabel:`配置产品` 弹窗。

在弹窗中，点击所需的属性选项以配置要生产的正确产品变体。然后，如果需要，可以点击 `1` 旁的绿色 :guilabel:`+` 或 :guilabel:`-` 图标更改要销售和生产的数量。

.. image:: product_variants/product-variants-variant-popup.png
   :align: center
   :alt: 选择变体属性的配置产品弹窗。

选择好所有规格后，点击 :guilabel:`添加`。这将使弹窗切换到第二个 :guilabel:`配置` 弹窗，其中将显示之前创建的可用可选产品（如果有）。

准备就绪后，点击 :guilabel:`确认` 关闭弹窗。

接着，点击 :guilabel:`保存` 以保存所有更改，并点击 :guilabel:`确认` 在 :guilabel:`报价单` 表单顶部创建并确认新的销售订单 (SO)。

生产物料清单产品的变体
------------------------

一旦确认销售订单 (SO)，一个 :guilabel:`制造` 智能按钮会出现在销售订单 (SO) 表单顶部。点击 :guilabel:`制造` 智能按钮以打开 :guilabel:`生产订单` 表单。

在此表单中，点击 :guilabel:`组件` 标签，可以看到已选择的变体的适当组件。根据变体的不同，列出的组件会有所不同。要查看任何必需或可选的 :guilabel:`操作` 步骤，点击 :guilabel:`工作订单` 标签。

要进入工作订单的平板视图工作界面，点击要完成的操作所在行右侧的 :guilabel:`平板图标`。

在平板视图中，点击 :guilabel:`标记为完成` 随着操作的进展来完成操作步骤。

或者，点击生产订单表单顶部的 :guilabel:`标记为完成` 按钮以完成订单。

.. image:: product_variants/product-variants-manufacturing-order.png
   :align: center
   :alt: 生产物料清单产品变体的生产订单。

然后，通过页面顶部的面包屑导航返回销售订单 (SO)。

现在，产品已生产完毕，点击 :guilabel:`交货` 智能按钮将产品交付给客户。在交货订单表单中，点击 :guilabel:`验证`，然后点击 :guilabel:`应用` 以交付产品。

要完成销售，请再次通过页面顶部的面包屑导航返回销售订单 (SO)。然后，点击 :guilabel:`创建发票`，接着点击 :guilabel:`再次创建发票`，为客户生成订单发票。
