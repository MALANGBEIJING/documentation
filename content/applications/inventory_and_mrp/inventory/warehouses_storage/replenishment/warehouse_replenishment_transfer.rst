========================================================
通过补货在仓库之间转移产品
========================================================

对于使用多个仓库的公司，通常需要在仓库之间转移物品。这被称为 *仓库间转移*。Odoo *库存* 处理仓库间转移的管理过程，以确保在转移期间和转移后库存数量的准确性。本文档将详细介绍使用补货进行仓库间转移的方法。

配置仓库以进行仓库间补货
====================================

首先，通过导航到 :menuselection:`库存 --> 配置 --> 设置`，确保启用了 :guilabel:`多步骤路线` 设置，并在 :guilabel:`仓库` 选项卡下勾选复选框。启用此设置后，在创建第二个仓库时将提供进行仓库间补货所需的其他配置选项。

默认情况下，Odoo 已经配置了一个主仓库。如果尚未创建附加仓库，请在 :guilabel:`库存` 模块中选择 :menuselection:`配置 --> 仓库 --> 创建` 来创建一个新的仓库。否则，选择产品将被转移到的仓库，并点击 :guilabel:`编辑` 来更改其设置。按以下步骤配置仓库：

- :guilabel:`仓库`：选择一个尚未被其他仓库使用的名称（例如 `备用仓库`）
- :guilabel:`简称`：选择一个仓库的简称（例如 `ALT_WH`）

点击 :guilabel:`保存`，新的仓库将被创建。此外，仓库的表单上会出现一个新的 :guilabel:`从...补货` 字段。点击 :guilabel:`编辑`，然后勾选将用于为当前配置的仓库补货的仓库旁边的复选框。

.. image:: warehouse_replenishment_transfer/new-warehouse-configuration.png
   :align: center
   :alt: 一个配置为允许仓库间补货的仓库设置表单。

.. note::
   在本演示中，产品转移自的仓库（发货仓库）将命名为“旧金山”，而产品转移到的仓库（收货仓库）将命名为“旧金山2”。

为仓库间补货配置产品
====================================

为了能够在仓库之间转移产品，产品也必须正确配置。导航到 :menuselection:`库存 --> 产品 --> 产品` 并选择一个现有产品，或在必要时 :guilabel:`创建` 一个新产品。

然后，在产品表单上，转到 :guilabel:`库存` 选项卡，启用复选框 :guilabel:`X: 从 Y 补充产品`，其中 *X* 是接收转移产品的仓库，*Y* 是产品转移自的仓库。

.. image:: warehouse_replenishment_transfer/product-transfer-configuration.png
   :align: center
   :alt: 启用复选框以从另一个仓库补货。

从另一个仓库补充库存
====================================

在 :menuselection:`库存` 模块中，选择 :menuselection:`产品 --> 产品`，然后选择将被补货的产品。点击产品页面左上角的 :guilabel:`补货` 按钮，并按以下方式填写弹出表单：

- :guilabel:`数量`：将发送到补货仓库的单位数量
- :guilabel:`计划日期`：计划进行补货的日期
- :guilabel:`仓库`：将被补货的仓库
- :guilabel:`首选路线`：选择 `X: 从 Y 补充产品`，其中 *X* 是将被补货的仓库，*Y* 是产品将被转移自的仓库

.. image:: warehouse_replenishment_transfer/product-replenishment-form.png
   :align: center
   :alt: 用于补充产品的表单。

点击 :guilabel:`确认`，系统将为发货仓库创建发货单，并为接收产品的仓库创建收货单。根据发货仓库和收货仓库的配置设置，处理发货单和收货单的步骤可能在一到三步之间。本文档将详细介绍如何处理单步发货和收货。

处理发货单
--------------------------

补货订单的第一阶段是处理来自产品转移自仓库的发货。在 :menuselection:`库存` 仪表板中，选择发货仓库的 :guilabel:`X 需处理` 按钮，然后选择为补货创建的发货单。在发货单页面上，点击左上角的 :guilabel:`检查可用性` 按钮，以预留要转移的产品数量。发货完成后，点击 :guilabel:`验证` 按钮以登记发货数量。

.. image:: warehouse_replenishment_transfer/delivery-orders-card.png
   :align: center
   :alt: 发货仓库的发货订单卡片。

处理收货单
-------------------

一旦货物到达收货仓库，还必须处理为该仓库创建的收货单。返回 :menuselection:`库存` 仪表板，选择收货仓库的 :guilabel:`X 需处理` 按钮，然后选择为补货创建的收货单。在收货单页面上，点击页面左上角的 :guilabel:`验证` 按钮，以登记接收到的数量。

.. image:: warehouse_replenishment_transfer/receipts-card.png
   :align: center
   :alt: 发货仓库的发货订单卡片。

处理收货单后，转移的产品将出现在收货仓库的库存中。可以返回到产品页面，选择页面顶部的 :guilabel:`X 单位在手` 按钮，查看两个仓库的库存数量。

自动化仓库间补货
====================================

通过补货规则，可以自动化一个仓库从另一个仓库补货的过程。

要开始，请导航至 :menuselection:`库存 --> 产品 --> 产品`，然后选择将被补货的产品。在产品页面上，选择表单顶部的 :guilabel:`补货规则` 智能按钮，然后在下一页面中点击 :guilabel:`创建` 按以下方式配置表单：

- :guilabel:`库位`：补货规则触发时将补货的库位，在此情况下为收货仓库
- :guilabel:`最小数量`：当收货仓库的现有数量低于此数量时，补货规则将被触发
- :guilabel:`最大数量`：当补货规则被触发时，产品将在收货仓库中补充到此数量
- :guilabel:`批量数量`：指定产品是否应按某个数量批量补充；例如，产品可以按20的批量补充
- :guilabel:`计量单位`：用于补货产品的计量单位；此值可以是 `单位`，也可以是重量、长度等特定的计量单位

.. image:: warehouse_replenishment_transfer/reordering-rule-configuration.png
   :align: center
   :alt: 一个完全配置的补货规则。

最后点击 :guilabel:`保存`，补货规则将被创建。现在，当系统每天自动运行调度程序时，将为每个被触发的补货规则创建一个转移。

.. tip::
   要手动触发补货规则，从 :menuselection:`库存` 模块开始，选择 :menuselection:`操作 --> 运行调度程序`，然后在弹出的窗口中点击绿色的 :guilabel:`运行调度程序` 按钮。

调度程序运行后，将分别为发货仓库和收货仓库创建发货单和收货单。发货单和收货单应使用上述相同的方法进行处理。
