=============
访问权限
=============

*访问权限* 是决定用户可以访问和编辑哪些内容和应用程序的权限。在Odoo中，这些权限可以为单个用户或用户组设置。将权限限制为仅需要访问的人，确保用户不会修改或删除他们不应接触的内容。

**只有** *管理员* 才能更改访问权限。

.. danger::
   对访问权限进行更改可能会对数据库产生不利影响。这包括*无能管理员*，这意味着数据库中的任何用户都无法更改访问权限。因此，Odoo建议在更改之前联系Odoo业务分析师或我们的支持团队。

.. tip::
   用户**必须**在其用户配置文件中设置特定的*管理*访问权限，才能更改其他用户的访问权限设置。

   要访问此设置，导航到 :menuselection:`设置应用程序 --> 管理用户 --> 选择用户 --> 访问权限选项卡 --> 管理部分 --> 管理字段`。

   到达设置后，已经存在的管理员**必须**将 :guilabel:`管理` 字段中的设置更改为 :guilabel:`访问权限`。

   完成后，点击 :guilabel:`保存` 以保存更改，并将该用户设置为管理员。

用户
=====

:ref:`单个用户的访问权限 <users/add-individual>` 在将用户添加到数据库时设置，但可以在用户的配置文件中随时调整。

要更改用户的权限，请点击要编辑的用户。

.. image:: access_rights/navigate-to-users-menu.png
   :align: center
   :alt: Odoo设置应用程序中用户和公司部分的用户菜单。

在用户的配置文件页面中，在 :guilabel:`访问权限` 选项卡中向下滚动以查看当前权限。

对于每个应用程序，使用下拉菜单选择该用户应拥有的权限级别。每个部分的选项可能不同，但最常见的包括：:guilabel:`空/无`，:guilabel:`用户：自己的文件`，:guilabel:`用户：所有文件`，或 :guilabel:`管理员`。

:guilabel:`访问权限` 选项卡中的 :guilabel:`管理` 字段提供以下选项：:guilabel:`设置` 或 :guilabel:`访问权限`。

.. image:: access_rights/user-permissions-dropdown-menu.png
   :align: center
   :alt: 销售应用程序的下拉菜单，用于设置用户的权限级别。

.. _access-rights/groups:

创建和修改用户组
========================

*用户组* 是特定于应用程序的一组权限，用于管理大量用户的常见访问权限。管理员可以修改Odoo中现有的用户组，或创建新的用户组来定义应用程序内模型的规则。

要访问用户组，首先启用Odoo的 :ref:`开发者模式 <developer-mode>`，然后转到 :menuselection:`设置应用程序 --> 用户和公司 --> 用户组`。

.. image:: access_rights/click-users-and-companies.png
   :align: center
   :alt: Odoo设置应用程序中用户和公司部分的用户组菜单。

要在 :guilabel:`用户组` 页面创建新用户组，点击 :guilabel:`创建`。然后，在空白的用户组表单中选择一个 :guilabel:`应用程序`，并填写用户组表单（如下所述）。

要修改现有的用户组，从 :guilabel:`用户组` 页面显示的列表中点击一个现有的用户组，并编辑表单内容。

为用户组输入一个 :guilabel:`名称`，并勾选 :guilabel:`共享组` 旁边的复选框，如果该用户组是为了与某些用户共享数据而创建的。

.. important::
   始终测试正在更改的设置，以确保它们已应用于正确的用户。

用户组表单包含多个选项卡，用于管理用户组的所有元素。在每个选项卡中，点击 :guilabel:`添加行` 来为用户或规则添加新行，并点击 :guilabel:`❌（移除）` 图标删除行。

.. image:: access_rights/groups-form.png
   :align: center
   :alt: 修改用户组设置的选项卡。

- :guilabel:`用户` 选项卡：列出了当前用户组中的用户。以黑色显示的用户拥有管理权限。没有管理权限的用户显示为蓝色。点击 :guilabel:`添加行` 将用户添加到该组。
- :guilabel:`继承` 选项卡：继承意味着添加到该组的用户会自动添加到该选项卡中列出的用户组。点击 :guilabel:`添加行` 添加继承的用户组。

  .. example::
     例如，如果*销售/管理员*组的 :guilabel:`继承` 选项卡中列出了 *网站/受限编辑器* 组，则任何添加到 *销售/管理员* 组的用户都会自动获得 *网站/受限编辑器* 组的访问权限。

- :guilabel:`菜单` 选项卡：定义该组可以访问的菜单/模型。点击 :guilabel:`添加行` 添加特定菜单。
- :guilabel:`视图` 选项卡：列出该组在Odoo中可以访问的视图。点击 :guilabel:`添加行` 为该组添加视图。
- :guilabel:`访问权限` 选项卡：列出该组拥有访问权限的模型（第一层权限）。点击 :guilabel:`添加行` 为该组链接访问权限。在此选项卡中，:guilabel:`模型` 列代表菜单/模型的通用名称，:guilabel:`名称` 列代表模型的技术名称。对于每个模型，启用以下选项（视需要而定）：

  - :guilabel:`读取`：用户可以查看对象的现有值。
  - :guilabel:`写入`：用户可以编辑对象的现有值。
  - :guilabel:`创建`：用户可以为对象创建新值。
  - :guilabel:`删除`：用户可以删除对象的值。

  .. tip::
     首先尝试在 :guilabel:`模型` 列的下拉菜单中搜索模型的通用名称。可以通过点击 :guilabel:`（外部链接）` 图标展开模型通用名称来找到模型技术名称。

     模型的技术名称也可以在 :ref:`开发者模式 <developer-mode>` 中访问。

     在表单中，导航到任何字段并悬停在字段名称上。一个包含特定Odoo :guilabel:`模型` 名称的后台信息框会显示。这是应添加的模型的技术名称。

     .. image:: access_rights/technical-info.png
        :align: center
        :alt: 模型字段上的技术信息，突出显示了对象。

- :guilabel:`记录规则`：列出了编辑和可见性权限的第二层。:guilabel:`记录规则` 覆盖或细化用户组的访问权限。点击 :guilabel:`添加行` 为该组添加记录规则。对于每条规则，选择以下选项的值：

  - :guilabel:`应用于读取`。
  - :guilabel:`应用于写入`。
  - :guilabel:`应用于创建`。
  - :guilabel:`应用于删除`。

  .. important::
     记录规则使用*域*或条件来筛选数据。域表达式是这样条件的列表。例如：

     `[('mrp_production_ids', 'in', user.partner_id.commercial_partner_id.production_ids.ids)]`

     此记录规则用于为分包商启用MRP消耗警告。

     Odoo有一个预配置记录规则的库，便于使用。没有域（和域表达式）知识的用户应在更改之前咨询Odoo业务分析师或Odoo支持团队。

.. _access-rights/superuser:

超级用户模式
==============

*超级用户模式* 允许用户绕过记录规则和访问权限。要激活*超级用户模式*，首先启用 :ref:`开发者模式 <developer-mode>`。然后，导航到顶部横幅中的*调试*菜单，表示为 :guilabel:`🪲（bug）` 图标。

最后，在菜单底部点击 :guilabel:`成为超级用户`。

.. important::
   只有具有*管理*部分中*设置*访问权限的用户（在其用户配置文件中）才被允许登录*超级用户模式*。

.. danger::
   *超级用户模式* 允许绕过记录规则和访问权限，因此，应极为谨慎地使用。

   退出*超级用户模式*后，用户可能会由于所做的更改而被锁定数据库。这可能导致*无能管理员*，即无法更改访问权限/设置的管理员。

   在这种情况下，请联系Odoo支持：`新帮助工单 <https://www.odoo.com/help>`_。支持团队可以通过支持登录恢复访问权限。

要退出*超级用户模式*，请通过导航到右上角，点击 :guilabel:`OdooBot` 用户名并选择 :guilabel:`登出` 选项退出账户。

.. tip::
   激活*超级用户模式*的另一种方法是以超级用户身份登录。为此，请导航到登录屏幕，输入相应的 :guilabel:`电子邮件` 和 :guilabel:`密码`。

   而不是点击 :guilabel:`登录`，点击 :guilabel:`以超级用户身份登录`。
