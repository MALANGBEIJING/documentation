=============
多公司
=============

.. |mcd| replace:: 多公司数据库

在 Odoo 中，多个公司可以存在于同一个数据库中。这使得一些数据可以在公司之间共享，同时仍然保持实体之间的一定程度的分离。

在决定使用多公司功能之前，需要考虑几个因素。

.. important::
   多公司功能**仅**适用于*一款免费应用*数据库或`自定义计划 <https://www.odoo.com/pricing-plan>`_。

访问多个公司
================

员工在 |mcd| 中可以访问的公司列表可以在 Odoo 主菜单栏的右上角找到，那里列出了当前活动的公司。点击公司名称可以显示所有允许访问的公司列表。要切换到另一个公司，只需点击下拉菜单中的公司名称。要同时启用多个公司，请选中每个所需公司名称旁边的复选框。

.. figure:: multi_company/company-access.png
   :align: center
   :alt: 用户登录数据库时可以访问的公司列表示例。

   一个用户可以访问多个公司的示例。当前公司是我的公司（旧金山），同时我的公司（芝加哥）也是活动状态。

.. note::
   在每次选中复选框后，数据库可能会刷新。

.. _general/active-companies:

多个活动公司
----------------

如果一次启用了多个公司，一个公司将以紫色高亮显示，并列在菜单栏上。这被认为是*当前*公司。

在创建新记录时，当前公司会自动添加到记录中的*公司*字段中，以下情况除外：

- 对于新产品或新联系人，*公司*字段留空。
- 如果系统中已经存在相关文档，新记录上的*公司*字段默认为相同的公司。

.. example::
   Mitchell Admin 启用了多个公司，但当前公司是 `我的公司（芝加哥）`。当他创建一个新的产品记录时，:guilabel:`公司`字段默认是空的。

   当创建一个新的销售团队时，:guilabel:`公司`字段会自动默认为 `我的公司（芝加哥）`。

.. _general/sharing-data:

共享数据
==========

在 |mcd| 中，某些记录可以被所有公司使用（或根据权限由多个公司使用）。

产品
--------

在 |mcd| 中，新创建的产品默认情况下，:ref:`公司字段 <general/active-companies>`为空。如果*公司*字段保持为空，则该产品在所有公司之间共享。

联系人
--------

与产品类似，联系人记录默认情况下在公司之间共享。要将访问权限限制为单个公司，只需点击联系人表单中的 :ref:`公司字段 <general/active-companies>`，并选择一个公司来分配给联系人。

跨公司交易
==========================

:ref:`跨公司交易 <general/inter-company>` 功能允许同一个数据库中的一个公司向另一个公司出售或购买商品和服务。根据配置设置，可以自动生成并同步订单和发票的对应文档。

.. warning::
   为确保跨公司交易得到适当处理，需要准确分配某些配置，例如财务定位和本地化。有关更多信息，请参见 :ref:`跨公司交易 <general/inter-company>`。

用例
=========

跨国公司
-----------------------

一家在美国和加拿大运营的跨国零售连锁店需要管理美元（USD）和加元（CAD）两种货币的交易。

此外，由于两国有不同的税法和法规，客户最好利用多公司功能。

这使得他们可以管理跨国界的库存移动，同时让客户可以在两国以他们的本币进行销售。

独立流程
------------------

一家小型家具公司正在开发一条需要单独的采购、库存和生产流程的新产品线。新产品与现有产品目录有很大不同。公司正在考虑利用多公司功能将这条新产品线视为一个不同的实体。

为了防止数据库变得过于复杂，家具公司不需要添加一个全新的公司。相反，他们可以利用现有功能，例如 :doc:`分析会计 <../finance/accounting/reporting/analytic_accounting>` 和多个仓库，来管理新的产品线，而不必让交易变得过于复杂。

限制
===========

在某些情况下，|mcd| 可能不是最佳选择，原因在于潜在的限制。

访问权限
-------------

用户的访问权限在数据库层面进行配置。如果用户可以访问 |mcd| 中的多个公司，那么他们在每个公司的访问权限都是相同的。

共享记录
--------------

单个记录要么在所有公司之间 :ref:`共享 <general/sharing-data>`，要么属于一个公司。

PDF 报告
-----------

某些定制化，特别是针对 PDF 报告的定制，适用于所有公司。不一定能够将报告单独分开用于每个公司。
